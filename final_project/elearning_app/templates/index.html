{% extends 'base.html' %}
{% block content %}
{% if user.is_authenticated %}
<div class="flex flex-row gap-8 w-full">
    <!-- Main Content -->
    <div class="flex flex-col w-3/4 gap-8">
        <div class="flex items-center justify-between mb-6">
            <h1 class="font-bold text-2xl">
                My Courses
            </h1>
            {% if user.role == 'Teacher' %}
            <button
                type="button"
                onclick="openModal()"
                class="inline-block px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-500 transition"
                hx-get="{% url 'course-create' %}"
                hx-target="#modal"
                hx-trigger="click"
            >
                + Create Course
            </button>
            {% endif %}
        </div>
        {% if user.role == 'Student' %}
            {% include 'components/course_gallery.html' with courses=courses view="progress" %}
        {% else %}
            {% include 'components/course_gallery.html' with courses=courses view="stats" %}
        {% endif %}
        
        <div>
            <div class="flex items-center justify-between">
                <h1 class="font-bold text-2xl mb-6">
                    Feed
                </h1>
                {% if user.role == 'Student' %}
                    <button
                        type="button"
                        onclick="openModal()"
                        class="inline-block px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-500 transition"
                        hx-get="{% url 'status-update-create' %}"
                        hx-target="#modal"
                        hx-trigger="click"
                    >
                        + Post Update
                    </button>
                {% endif %}
            </div>
            {% include 'components/status_update_gallery.html' with status_updates=status_updates show_course=True %}
        </div>
    </div>

    <!-- Sidebar -->
    <div class="flex flex-col w-1/4 py-4 px-4 gap-8">
        <div>
            <h1 class="font-bold text-xl border-b border-gray-400 mb-2">
                Notifications
            </h1>
            {% include 'components/notifications_list.html' with notifications=notifications go_to_course=True %}
        </div>
        <div>
            <h1 class="font-bold text-xl border-b border-gray-400 mb-2">
                Chats
            </h1>
            {% include 'components/chat_list.html' with chats=chats %}
        </div>
    </div>

{% else %}
<div class="flex flex-col w-full gap-8">
    <div>
        Join thousands of learners mastering in-demand skills through interactive courses, hands-on projects, and personalized learning paths designed for your success.
    </div>
    <div>
        <h1 class="font-bold text-2xl mb-6">
            Available Courses
        </h1>
        {% include 'components/course_gallery.html' with courses=courses view="stats" %}
    </div>
    <div>
        <h1 class="font-bold text-2xl mb-6">
            Our Teachers
        </h1>
        {% include 'components/teacher_gallery.html' with teachers=teachers %}
    </div>
</div>

{% endif %}
</div>
{% endblock %}